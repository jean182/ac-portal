%h1 Client Management
= link_to('New Client', new_admin_client_path)
|
= render 'admin/shared/links'
%table.table.table-bordered
  %thead
    %tr
      %th{:scope => "col"} Email
      %th{:scope => "col"} Company
      %th{:scope => "col"} Role
      %th{:scope => "col"} Actions
  %tbody
    - @clients.each do |client|
      %tr
        %td
          = client.email
          = " (Invitation pending)" if client.invitation_created_at.present? && client.invitation_accepted_at.nil?
        %td
          = client.client_info.company.name
        %td
          = client.type
        %td
          - if client.deleted_at.present?
            = button_to "Restore client", {controller: "clients", action: "reactivate_client", id: client.id}, {class: 'btn btn-warning btn-sm', data: { :confirm => "Are you sure?" }}
          -else
            = link_to("Disable user", admin_client_path(client), data: { confirm: "Are you sure?" }, method: :delete, class: 'btn btn-danger btn-sm')
          = link_to("Reset password", admin_send_reset_password_instructions_path(client), data: { confirm: "Are you sure?" }, method: :post, class: 'btn btn-success btn-sm')
